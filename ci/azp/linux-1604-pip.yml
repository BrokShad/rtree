jobs:
- job:
  displayName: ubuntu-16.04â€“pip
  pool:
    vmImage: 'ubuntu-16.04'

  steps:
  - bash: sudo apt install libspatialindex-c4v5 python3-pip
    displayName: Install libspatialindex and pip

  - bash: |
      pip3 install setuptools
      pip3 install .
    displayName: pip install

  - bash: |
      source activate rtree
      pip install flake8
      flake8 --ignore=E501 --exclude=rtree/__init__.py rtree/
    displayName: Flake8 linting

  - bash: |
      pip3 install pytest numpy
      python3 -m pytest --doctest-modules rtree tests/test_*
    displayName: pytest
